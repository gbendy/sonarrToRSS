<div class="container">
  <div class="centreColumn config">
  <heading>Configure Sonarr to RSS</heading>
    <events>
      <event>
        <data>
          <detail>
            <episode class="noseries">Host</episode>
            <release>
              <entry><span class="label">Port Number</span><input id="port" value="{{context.config.port}}" type="number" min="1" max="65535"></entry>
              <entry class="tip"><span id= "portMessage">* Port number this server listens on</span></entry>
              <entry><span class="label">Listen Address</span><input id="address" value="{{context.config.address}}"></entry>
              <entry class="tip"><span id= "addressMessage">* Address this server listens on</span></entry>
              <entry><span class="label">Application URL</span><input id="applicationUrl" value="{{context.config.applicationUrl}}"></entry>
              <entry class="tip"><span id= "applicationUrlMessage">* Public URL to access this server. This is prefixed to links in the RSS feed{{#unless context.config.configured}}<br><i>The above is a default. Verify and change if necessary</i>{{/unless}}</span></entry>
              <entry><span class="label">URL Base</span><input id="urlBase" value="{{context.config.urlBase}}"></entry>
              <entry class="tip"><span id= "urlBaseMessage">If behind a path based reverse proxy the path to prefix to relative URLs</span></entry>
            </release>
          </detail>
        </data>
      </event>
      <event>
        <data>
          <detail>
            <episode class="noseries">Sonarr</episode>
            <release>
              <entry><span class="label">Sonarr Base URL</span><input id ="sonarrBaseUrl" value="{{context.config.sonarrBaseUrl}}"></entry>
              <entry class="tip"><span id= "sonarrBaseUrlMessage">URL to the Sonarr application we are processing web hooks for</span></entry>
              <entry><span class="label">Insecure</span><input id="sonarrInsecure" {{ifEqual context.config.sonarrInsecure true 'checked' ''}} type="checkbox"></entry>
              <entry class="tip"><span id= "sonarrInsecureMessage">Allow insecure connections to Sonarr</span></entry>
              <entry><span class="label">API Key</span><input id="sonarrApiKey" value="{{context.config.sonarrApiKey}}"></entry>
              <entry class="tip"><span id= "sonarrApiKeyMessage">API key for the Sonarr application we are processing web hooks for</span></entry>
              <entry><button id="testSonarr" type="button" onclick="testSonarr()">Test</button></entry>
              <entry class="tip"><span id="testSonarrResult">{{#if context.hostConfig.instanceName}}Connected to {{context.hostConfig.instanceName}}{{else}}Sonarr not found{{/if}}</span></entry>
            </release>
          </detail>
        </data>
      </event>
      <event>
        <data>
          <detail>
            <release>
              {{#if context.config.configured}}
              <entry><button id="saveConfig" type="button" onclick="saveConfig()">Save</button><button type="button" onclick="location.href='{{browseUrl undefined undefined undefined useApplicationUrl}}';">Browse</button></entry>
              {{else}}
              <entry><button id="saveConfig" type="button" onclick="saveConfig()">Continue</button></entry>
              {{/if}}
            </release>
          </detail>
        </data>
      </event>
    </events>
  </div>
</div>
<div id="overlay" class="hidden"><message id="overlayMessage"></message></div>
